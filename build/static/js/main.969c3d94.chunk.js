(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},25:function(e,t,a){e.exports=a(61)},30:function(e,t,a){},32:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},33:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getMoviesList",function(){return M}),a.d(n,"api",function(){return N}),a.d(n,"setOpenModalKey",function(){return _}),a.d(n,"update",function(){return D}),a.d(n,"deleteMovie",function(){return j}),a.d(n,"addMovie",function(){return C}),a.d(n,"isMovieExist",function(){return I});var i=a(0),r=a.n(i),s=a(22),o=a.n(s),l=(a(30),a(8)),c=a(1),u=a(2),d=a(4),m=a(3),p=a(5),v=(a(32),a(33),a(12),function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_onMouseOver",value:function(){this.props.movieDisplayUpdateCallback("movieDetails")}},{key:"_renderMovieImg",value:function(){try{var e={"background-image":"url("+this.props.item.Poster+")","background-repeat":"no-repeat","background-size":"cover"};return r.a.createElement("div",{className:"movieImg",onMouseOver:this._onMouseOver.bind(this),style:e})}catch(t){}}},{key:"render",value:function(){return this._renderMovieImg()}}]),t}(i.Component)),h=function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_renderMovieTitle",value:function(){try{return r.a.createElement("div",{className:"movieTitle"},this.props.item.Title)}catch(e){}}},{key:"render",value:function(){return this._renderMovieTitle()}}]),t}(i.Component),f=function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_renderMovieTitle",value:function(){try{return r.a.createElement("div",{className:"detiails"},r.a.createElement("div",{className:"year"},r.a.createElement("span",null,"Year: "," "),this.props.item.Year),r.a.createElement("div",{className:"runtime"},r.a.createElement("span",null,"Runtime: "),this.props.item.Runtime," "),r.a.createElement("div",{className:"genre"},r.a.createElement("span",null,"Genre: ")," ",this.props.item.Genre),r.a.createElement("div",{className:"director"}," ",r.a.createElement("span",null,"Director: "),this.props.item.Director))}catch(e){}}},{key:"render",value:function(){return this._renderMovieTitle()}}]),t}(i.Component),y=function(e){return isNaN(e)||4!=e.length||e<0?{status:"error",msg:"year is not valid"}:{status:"ok"}},b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={imdbID:"",year:"",runtime:"",genre:"",director:"",inputsValidation:{year:!0,runtime:!0,genre:!0,director:!0},isValid:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({imdbID:this.props.item.imdbID,year:this.props.item.Year,runtime:this.props.item.Runtime,genre:this.props.item.Genre,director:this.props.item.Director})}},{key:"_setOpenModalKey",value:function(e){this.props.setOpenModalKey(e)}},{key:"_update",value:function(e){var t=this._setDataToUpdate(),a={id:e,year:this.state.year,runtime:this.state.runtime,genre:this.state.genre,director:this.state.director},n=Object.assign(this.props.item,a);this.props.update(t,n,e)}},{key:"_delete",value:function(e){var t=this._setDataAfterDelete();this.props.deleteMovie(t,e)}},{key:"_setDataToUpdate",value:function(){for(var e=this.props.general.moviesList,t=0;t<e.length;++t){var a=e[t];a.imdbID===this.state.imdbID&&(a.Year=this.state.year,a.Runtime=this.state.runtime,a.Genre=this.state.genre,a.Director=this.state.director)}return e}},{key:"_setDataAfterDelete",value:function(){var e=this;return this.props.general.moviesList.filter(function(t,a){return t.imdbID!=e.state.imdbID})}},{key:"_validation",value:function(e){var t={year:function(e){return y(e)},runtime:function(e){return function(e){return isNaN(e)||e<0?{status:"error",msg:"year is not valid"}:{status:"ok"}}(e)},genre:function(e){return function(e){var t=e.split(","),a=["romance","action","adventure","honor","western","documentary","crime","science fiction","war","mystery","comedy","biographical","parody","melodrama","family","drama"],n=!1;t.forEach(function(e,a){" "==e.charAt(0)&&(t[a]=e.substr(1))});for(var i=0;i<t.length;++i){n=!1;for(var r=0;r<a.length;++r)t[i].toUpperCase()===a[r].toUpperCase()&&(n=!0,r=a.length);if(!n)return{status:"error",msg:"input is not valid"}}return{status:"ok"}}(e)},director:function(e){return function(e){var t=/^[A-Za-z]{2,}\s[A-Za-z-']{2,}$/,a=e.split(",");return a.forEach(function(e,t){" "==e.charAt(0)&&(a[t]=e.substr(1))}),a.filter(function(e,a){return!t.test(e)}).length>0?{status:"error",msg:"input is not valid"}:{status:"ok"}}(e)}}[e](this.refs[e].value),a=this.state.inputsValidation;"error"==t.status?(this.refs[e].classList.add("invalid"),a[e]=!1,this.setState({isValid:!1,inputsValidation:a})):"ok"==t.status&&this.refs[e].className.includes("invalid")&&(this.refs[e].classList.remove("invalid"),a[e]=!0,this.setState({isValid:!0,inputsValidation:a}))}},{key:"_getRuntime",value:function(){return this.state.runtime.split(" ")[0]}},{key:"_getGenreOrDirector",value:function(e){var t=this.state[e].split(",");return t.forEach(function(e,a){var n;" "==e.charAt(0)&&(t[a]=e.substr(1)),t[a]=(n=t[a]).charAt(0).toUpperCase()+n.slice(1)}),t.toString()}},{key:"_renderButtons",value:function(){var e=this;try{return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#update",onClick:function(){return e._setOpenModalKey(e.props.index)}},r.a.createElement("span",null,"Update")),r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#delete",onClick:function(){return e.props.setOpenModalKey(e.props.index)}},r.a.createElement("span",null,"Delete"))),r.a.createElement("div",{className:"modal",id:"update"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Update Movie Details"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return e.props.setOpenModalKey(-99)}},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",null,r.a.createElement("span",null,"Year: "," "),r.a.createElement("input",{type:"text",name:"year",value:this.state.year,ref:"year",onChange:function(t){e._validation("year"),e.setState({year:e.refs.year.value})}}),!this.state.inputsValidation.year&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!")),r.a.createElement("div",null,r.a.createElement("span",null,"Runtime (Minutes): "),r.a.createElement("input",{type:"text",name:"runtime",value:this._getRuntime(),ref:"runtime",onChange:function(t){e._validation("runtime"),e.setState({runtime:t.target.value})}}),!this.state.inputsValidation.runtime&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!")),r.a.createElement("div",null,r.a.createElement("span",null,"Genre: "),r.a.createElement("input",{type:"text",name:"genre",value:this._getGenreOrDirector("genre"),ref:"genre",onChange:function(t){e._validation("genre"),e.setState({genre:t.target.value})}}),!this.state.inputsValidation.genre&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!")),r.a.createElement("div",null,r.a.createElement("span",null,"Director: "),r.a.createElement("input",{type:"text",name:"director",value:this._getGenreOrDirector("director"),ref:"director",onChange:function(t){e._validation("director"),e.setState({director:t.target.value})}}),!this.state.inputsValidation.director&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":this.state.isValid?"modal":"",onClick:function(){e.state.isValid&&(e.props.setOpenModalKey(-99),e._update(e.props.item.id))}},"Update"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return e.props.setOpenModalKey(-99)}},"Close"))))),r.a.createElement("div",{className:"modal",id:"delete"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Are you sure you want delete this movie?"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return e.props.setOpenModalKey(-99)}},"\xd7")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":this.state.isValid?"modal":"",onClick:function(){e.props.setOpenModalKey(-99),e._delete(e.props.item.id)}},"Yes"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return e.props.setOpenModalKey(-99)}},"No"))))))}catch(t){}}},{key:"render",value:function(){return this._renderButtons()}}]),t}(i.Component),E=function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_onMouseOut",value:function(){this.props.movieDisplayUpdateCallback("poster")}},{key:"_renderMovieDetails",value:function(){try{return r.a.createElement("div",{className:"movieDetails",onMouseOut:this._onMouseOut.bind(this)},r.a.createElement(h,this.props),r.a.createElement(f,this.props),r.a.createElement(b,this.props))}catch(e){}}},{key:"render",value:function(){return this._renderMovieDetails()}}]),t}(i.Component),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={movieDisplay:"poster"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_movieDisplayUpdateCallback",value:function(e){this.setState({movieDisplay:e})}},{key:"_renderMovieDetails",value:function(){var e=this,t={poster:function(){return r.a.createElement(v,Object.assign({},e.props,{movieDisplayUpdateCallback:e._movieDisplayUpdateCallback.bind(e)}))},movieDetails:function(){return r.a.createElement(E,Object.assign({},e.props,{movieDisplayUpdateCallback:e._movieDisplayUpdateCallback.bind(e)}))}};return r.a.createElement("div",{className:"movie"},this.props.index==this.props.general.openModalKey?t.movieDetails():t[this.state.movieDisplay]())}},{key:"render",value:function(){return this._renderMovieDetails()}}]),t}(i.Component),O=function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_renderMoviesList",value:function(){var e=this;return r.a.createElement("div",{className:"moviesList"},this.props.general.moviesList.map(function(t,a){return r.a.createElement(g,Object.assign({},e.props,{item:t,key:a,index:a}))}))}},{key:"render",value:function(){return this._renderMoviesList()}}]),t}(i.Component),k=a(10),M=function(){return{type:"API",payload:{type:"GET_MOVIES_LIST",method:"get"}}},N=function(e,t){return{type:e,payload:t}},_=function(e){return{type:"SET_OPEN_MODAL_KEY",payload:e}},D=function(e,t,a){return{type:"API",payload:{type:"UPDATE",newDatas:e,newData:t,index:a,method:"put"}}},j=function(e,t){return{type:"API",payload:{type:"DELETE",newDatas:e,index:t,method:"delete"}}},C=function(e,t,a){return{type:"API",payload:{type:"ADD",currentDb:e,newData:t,id:a,method:"post"}}},I=function(e){return{type:"IS_MOVIE_EXIST",payload:e}},x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={imdbID:"",title:"",year:"",inputsValidation:{year:!0,title:!0},isValid:!0,isMovieExist:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_add",value:function(){var e={title:this.state.title,year:this.state.year},t=this._generateMovieId(),a=this._titleCorrectFormat(this.state.title);e.title=a,this.props.isMovieExist(!1),this.props.addMovie(this.props.general.moviesList,e,t),this.setState({title:"",year:""})}},{key:"_generateMovieId",value:function(){for(var e=Math.floor(1e3*Math.random()+1);this._isIdExist(e);)e=Math.floor(1e3*Math.random()+1);return e}},{key:"_isIdExist",value:function(e){for(var t=this.props.general.moviesList,a=0;a<t.length;++a){if(t[a].id==e)return!0}return!1}},{key:"_titleCorrectFormat",value:function(e){return function(e){var t=e.toString();return t=t.replace(/,/g,"")}(function(e){e[0]=e[0].toUpperCase();for(var t=1;t<e.length;++t)isNaN(e[t])||(e[t]=e[t].toLowerCase())," "==e[t]&&(e[++t]=e[t].toUpperCase());return e}(function(e){for(var t=/^[A-Za-z']{1,}$/,a=0;a<e.length-1;++a)t.test(e[a])||" "==e[a]||(e.splice(a,1),--a);return e}(function(e){for(var t=/^[A-Za-z']{1,}$/,a=0;a<e.length;++a)!t.test(e[a])&&isNaN(e[a])&&" "!=e[a]&&(e.splice(a,1),--a);return e}(e.split("")))))}},{key:"_validation",value:function(e){var t={year:function(e){return""!=e?y(e):{status:"ok"}},title:function(e){return{status:"ok"}}}[e](this.refs[e].value),a=this.state.inputsValidation;"error"==t.status?(this.refs[e].classList.add("invalid"),a[e]=!1,this.setState({isValid:!1,inputsValidation:a})):"ok"==t.status&&this.refs[e].className.includes("invalid")&&(this.refs[e].classList.remove("invalid"),a[e]=!0,this.setState({isValid:!0,inputsValidation:a}))}},{key:"_ismovieExist",value:function(e){!function(e,t){for(var a in e)if(e[a].Title.toUpperCase()==t.toUpperCase())return!0;return!1}(this.props.general.moviesList,e)?this.state.isMovieExist&&(this.setState({isMovieExist:!1}),this.props.isMovieExist(!1)):this.setState({isMovieExist:!0})}},{key:"_renderButtons",value:function(){var e=this;try{return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"btnContainer"},r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#add"},r.a.createElement("span",null,"Add New Movie"))),r.a.createElement("div",{className:"modal",id:"add"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Add New Movie "),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return e.props.isMovieExist(!1)}},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",null,r.a.createElement("span",null,"Title: "," "),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,ref:"title",onChange:function(t){e.setState({title:e.refs.title.value}),e._ismovieExist(e.refs.title.value)}}),!this.state.inputsValidation.title&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!")),r.a.createElement("div",null,r.a.createElement("span",null,"Year: "," "),r.a.createElement("input",{type:"text",name:"year",value:this.state.year,ref:"year",onChange:function(t){e._validation("year"),e.setState({year:e.refs.year.value})}}),!this.state.inputsValidation.year&&r.a.createElement("span",{className:"error-message"},"Oops! Input invalid!"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":!this.state.isValid||this.props.general.isMovieExist||this.state.isMovieExist?"":"modal",onClick:function(){e.state.isValid&&e._add(e.props.index)}},"Add"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return e.props.isMovieExist(!1)}},"Close")),this.props.general.isMovieExist&&r.a.createElement("span",{className:"error-message"},"Oops! This Movie Is Exist!")))))}catch(t){}}},{key:"render",value:function(){return this._renderButtons()}}]),t}(i.Component),L=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getMoviesList()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,this.props),r.a.createElement(O,this.props))}}]),t}(i.Component),V=Object(k.b)(function(e){return Object(l.a)({},e)},n)(L);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=a(9),A=a(41),S=function(e){return function(t){return function(a){if("API"==a.type){var n="http://localhost:3000/moviesList",i=a.payload,r=i.type,s=i.method,o=i.index,l=i.newData,c=i.newDatas,u=i.id,d=i.currentDb,m={get:function(){A.get(n).then(function(t){e.dispatch(N(r,t.data))}).catch(function(e){return console.log(e)})},post:function(t){A.post(n,t).then(function(a){e.dispatch(N(r,t))}).catch(function(e){return console.log(e)})},put:function(){A.put(n+"/"+o+"/",l).then(function(t){e.dispatch(N(r,c))}).catch(function(e){return console.log(e)})},delete:function(){A.delete(n+"/"+o+"/").then(function(t){e.dispatch(N(r,c))}).catch(function(e){return console.log(e)})}};if("ADD"==r){var p=l.title.replace(" ","+");A.get("http://www.omdbapi.com/?apikey=81d51a00&t="+p+"&y="+l.year).then(function(t){var a=t.data;a.id=u,!function(e,t){for(var a in e)if(e[a].imdbID==t)return!0;return!1}(d,a.imdbID)?(m[s](a),e.dispatch(I(!1))):e.dispatch(I(!0))}).catch(function(e){return console.log(e)})}else m[s]()}return t(a)}}},T=Object(w.c)({general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(e=Object(l.a)({moviesList:[],openModalKey:-99,isMovieExist:!1},e),t.type){case"GET_MOVIES_LIST":var a=t.payload;return Object(l.a)({},e,{moviesList:a});case"SET_OPEN_MODAL_KEY":var n=t.payload;return Object(l.a)({},e,{openModalKey:n});case"UPDATE":var i=t.payload;return Object(l.a)({},e,{moviesList:i});case"DELETE":return i=t.payload,Object(l.a)({},e,{moviesList:i});case"ADD":var r=e.moviesList,s=t.payload;return r.push(s),Object(l.a)({},e,{moviesList:r});case"IS_MOVIE_EXIST":var o=t.payload;return Object(l.a)({},e,{isMovieExist:o});default:return e}return e}});o.a.render(r.a.createElement(k.a,{store:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Object(w.d)(T,Object(w.a)(S))}()},r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.969c3d94.chunk.js.map