{"ast":null,"code":"import * as actions from '../actions/general.act';\n\nvar axios = require('axios');\n\nexport default (function (store) {\n  return function (next) {\n    return function (action) {\n      if (action.type == 'API') {\n        var SERVER_ENDPOINT = \"http://localhost:3000/moviesList\";\n        var _action$payload = action.payload,\n            type = _action$payload.type,\n            method = _action$payload.method,\n            index = _action$payload.index,\n            newData = _action$payload.newData,\n            newDatas = _action$payload.newDatas;\n        console.log('asfasfasf', newData, index);\n        var api = {\n          'get': function get() {\n            axios.get(SERVER_ENDPOINT).then(function (res) {\n              store.dispatch(actions.api(type, res.data));\n            });\n          },\n          'put': function put() {\n            axios.post(SERVER_ENDPOINT + '/' + index + '/', newData).then(function (res) {\n              store.dispatch(actions.api(type, newDatas));\n            }).catch(function (err) {\n              return console.log(err);\n            });\n          }\n        };\n        api[method](); // store.dispatch(actions.api(type))\n      }\n\n      return next(action);\n    };\n  };\n});","map":{"version":3,"sources":["C:\\Users\\shalombar\\Desktop\\moviesLibrary\\my-app\\src\\middleware\\general.mid.js"],"names":["actions","axios","require","store","next","action","type","SERVER_ENDPOINT","payload","method","index","newData","newDatas","console","log","api","get","then","res","dispatch","data","post","catch","err"],"mappings":"AAAA,OAAO,KAAKA,OAAZ,MAAyB,wBAAzB;;AACA,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,gBAAe,UAAAC,KAAK;AAAA,SAAI,UAAAC,IAAI;AAAA,WAAI,UAAAC,MAAM,EAAI;AACtC,UAAIA,MAAM,CAACC,IAAP,IAAe,KAAnB,EAA0B;AACtB,YAAMC,eAAe,GAAG,kCAAxB;AADsB,8BAE2BF,MAAM,CAACG,OAFlC;AAAA,YAEhBF,IAFgB,mBAEhBA,IAFgB;AAAA,YAEVG,MAFU,mBAEVA,MAFU;AAAA,YAEFC,KAFE,mBAEFA,KAFE;AAAA,YAEKC,OAFL,mBAEKA,OAFL;AAAA,YAEcC,QAFd,mBAEcA,QAFd;AAGtBC,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBH,OAAxB,EAAgCD,KAAhC;AACA,YAAIK,GAAG,GAAG;AACN,iBAAO,eAAM;AACTd,YAAAA,KAAK,CAACe,GAAN,CAAUT,eAAV,EAA2BU,IAA3B,CAAgC,UAACC,GAAD,EAAS;AACrCf,cAAAA,KAAK,CAACgB,QAAN,CAAenB,OAAO,CAACe,GAAR,CAAYT,IAAZ,EAAkBY,GAAG,CAACE,IAAtB,CAAf;AACH,aAFD;AAGH,WALK;AAMN,iBAAO,eAAM;AACTnB,YAAAA,KAAK,CAACoB,IAAN,CAAYd,eAAe,GAAG,GAAlB,GAAwBG,KAAxB,GAA+B,GAA3C,EAAiDC,OAAjD,EAA0DM,IAA1D,CAA+D,UAACC,GAAD,EAAS;AACpEf,cAAAA,KAAK,CAACgB,QAAN,CAAenB,OAAO,CAACe,GAAR,CAAYT,IAAZ,EAAkBM,QAAlB,CAAf;AACH,aAFD,EAGCU,KAHD,CAGO,UAACC,GAAD;AAAA,qBAAOV,OAAO,CAACC,GAAR,CAAYS,GAAZ,CAAP;AAAA,aAHP;AAIH;AAXK,SAAV;AAcAR,QAAAA,GAAG,CAACN,MAAD,CAAH,GAlBsB,CAmBtB;AAEH;;AACD,aAAOL,IAAI,CAACC,MAAD,CAAX;AACH,KAxB2B;AAAA,GAAR;AAAA,CAApB","sourcesContent":["import * as actions from '../actions/general.act'\r\nconst axios = require('axios');\r\n\r\nexport default store => next => action => {\r\n    if (action.type == 'API') {\r\n        const SERVER_ENDPOINT = \"http://localhost:3000/moviesList\";\r\n        let { type, method, index, newData, newDatas } = action.payload;\r\n        console.log('asfasfasf',newData,index)\r\n        let api = {\r\n            'get': () => {\r\n                axios.get(SERVER_ENDPOINT).then((res) => {\r\n                    store.dispatch(actions.api(type, res.data))\r\n                })\r\n            },\r\n            'put': () => {\r\n                axios.post((SERVER_ENDPOINT + '/' + index +'/'), newData).then((res) => {\r\n                    store.dispatch(actions.api(type, newDatas))\r\n                })\r\n                .catch((err)=>console.log(err))\r\n            }\r\n        }\r\n\r\n        api[method]();\r\n        // store.dispatch(actions.api(type))\r\n\r\n    }\r\n    return next(action)\r\n}"]},"metadata":{},"sourceType":"module"}